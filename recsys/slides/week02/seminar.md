# Семинар 2. Метрики и простые бейзлайны

На этом семинаре мы обучим первый простой рекомендер - TopPop. Этот рекомендер вычисляет самые популярные треки и выдает в качестве рекомендаций случайный трек из top k самых популярных. Измерим качество этого рекомендера онлайн и офлайн. Подумаем о последствиях внедрения этого рекомендера.

### План действий

1. Используем ноутбук `Week2Seminar.ipynb`, чтобы вычислить топовые треки
    1. Используем данные прошлой недели, чтобы найти топовые треки по времени прослушивания.
    2. Реализуем метрику precision@10 (считаем положительными прослушки длиной больше 0.75).
    3. Сравним precision@10 для TopPop рекомендера с k=10, 100, 1000.
    4. TODO: Реализуем метрику MRR.
    5. Сохраним отсортированный список треков, чтобы использовать его на сервисе.
        
2.  Реализуем новый рекомендер `botify.recommenders.toppop.TopPop`, работающий по принципу:
    1. В конструктор подаем top-k треков.
    2. Рекомендуем случайный из top-k треков.
    
3. Создаем A/B эксперимент.
    1. В `botify.experiment.Experiments` создаем эксперимент `TOP_POP`. У этого эксперимента будет 3 тритмента.
    2. В `botify.server.NextTrack` используем этот эксперимент для выбора рекомендера между `Random` и `TopPop` с k=10, 100, 1000.
    3. Запускаем рекомендер и симулятор.
    4. Загружаем логи сервиса на HDFS.
   
4. Используем ноутбук `Week1Seminar.ipynb` для анализа.
    1. Запускаем анализатор для эксперимента `TOP_POP`.

### Вопросы

1. Какие проблемы есть у рекомендера `TopPop`? Что с Coverage?  
2. Что будет, если мы попробуем обучить рекомендер заново на собранных данных?
3. Как пофиксить `TopPop`, чтобы более популярные треки чаще попадали наверх списка?
4. Ожидаемые ли результаты у эксперимента `TOP_POP`?
